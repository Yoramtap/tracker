<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; style-src-elem 'self' 'unsafe-inline'; style-src-attr 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self'; object-src 'none'; base-uri 'self'; form-action 'none'"
    />
    <title>Backlog Trends</title>
    <link rel="stylesheet" href="./dashboard-styles.css" />
  </head>
  <body>
    <main>
      <section id="trend-panel" class="panel" aria-label="Backlog trend chart">
        <h1>Interactive chart - Bug trend across teams</h1>
        <div class="panel-subtitle panel-subtitle--with-help">
          <span>Bug trend across teams</span>
          <span class="help-wrap">
            <span class="help-tip" tabindex="0" role="button" aria-label="Bug trend chart explainer">?</span>
            <div class="help-popover" role="tooltip">
              <p><strong>Bug trend chart</strong> tracks open backlog over time by team.</p>
              <ul>
                <li>Each line is a team-level backlog trend.</li>
                <li>Use it to spot sustained growth, flattening, or cleanup momentum.</li>
                <li>Hover points to inspect values by date.</li>
              </ul>
            </div>
          </span>
        </div>
        <p id="trend-updated" class="panel-subtitle">Last updated: --</p>
        <div class="chart">
          <div id="bug-trend-chart" class="chart-canvas chart-canvas--standard"></div>
        </div>
        <p id="trend-status" class="panel-status" hidden></p>
      </section>

      <section id="composition-panel" class="panel" aria-label="Backlog stacked bars">
        <h2>Interactive chart - Bug composition by priority</h2>
        <div class="panel-subtitle panel-subtitle--with-help">
          <span>Backlog composition by priority</span>
          <span class="help-wrap">
            <span class="help-tip" tabindex="0" role="button" aria-label="Bug composition chart explainer">?</span>
            <div class="help-popover" role="tooltip">
              <p><strong>Composition chart</strong> shows how open work is distributed across priority bands.</p>
              <ul>
                <li>Each bar segment is a priority level.</li>
                <li>Use Team filter to compare where urgency is concentrated.</li>
                <li>Higher upper segments indicate more critical unresolved load.</li>
              </ul>
            </div>
          </span>
        </div>
        <p id="composition-updated" class="panel-subtitle">Last updated: --</p>
        <div class="radio-control-groups" aria-label="Composition controls">
          <fieldset class="radio-group-card">
            <legend>Team</legend>
            <label><input type="radio" name="composition-team-scope" value="bc" checked /> BC</label>
            <label><input type="radio" name="composition-team-scope" value="api" /> API</label>
            <label><input type="radio" name="composition-team-scope" value="legacy" /> Legacy</label>
            <label><input type="radio" name="composition-team-scope" value="react" /> React</label>
            <label><input type="radio" name="composition-team-scope" value="all" /> All</label>
          </fieldset>
        </div>
        <div class="chart">
          <div id="bug-composition-chart" class="chart-canvas chart-canvas--dense bar-chart-wrap"></div>
        </div>
        <p id="composition-status" class="panel-status" hidden></p>
      </section>

      <section id="uat-panel" class="panel" aria-label="UAT aging by priority">
        <h2>Interactive chart - UAT open by priority</h2>
        <div class="panel-subtitle panel-subtitle--with-help">
          <span id="uat-context">Broadcast, -- currently in UAT</span>
          <span class="help-wrap">
            <span class="help-tip" tabindex="0" role="button" aria-label="UAT aging chart explainer">?</span>
            <div class="help-popover" role="tooltip">
              <p><strong>UAT aging chart</strong> groups items currently in UAT into time-in-stage buckets.</p>
              <ul>
                <li>Buckets are weekly/monthly aging windows.</li>
                <li>Colors split counts by priority within each bucket.</li>
                <li>Rising older buckets signal verification bottlenecks.</li>
              </ul>
            </div>
          </span>
        </div>
        <p id="uat-updated" class="panel-subtitle">Last updated: --</p>
        <div class="chart">
          <div id="uat-open-by-priority-chart" class="chart-canvas chart-canvas--standard"></div>
        </div>
        <p id="uat-status" class="panel-status" hidden></p>
      </section>

      <section id="management-panel" class="panel" aria-label="Broadcast flow by priority">
        <h2>Interactive chart - Development time vs UAT time</h2>
        <div class="panel-subtitle panel-subtitle--with-help">
          <span id="management-context">Broadcast, -- historical flow tickets (sample)</span>
          <span class="help-wrap">
            <span class="help-tip" tabindex="0" role="button" aria-label="Development vs UAT chart explainer">?</span>
            <div class="help-popover" role="tooltip">
              <p><strong>Development vs UAT</strong> compares delivery time by priority.</p>
              <ul>
                <li>Bars show median days in Dev and UAT for each priority band.</li>
                <li>Source: completed flow items using changelog-derived stage timing.</li>
                <li>If UAT bars are consistently higher, QA/UAT is the likely bottleneck.</li>
              </ul>
            </div>
          </span>
        </div>
        <p id="management-updated" class="panel-subtitle">Last updated: --</p>
        <div class="chart">
          <div id="development-time-vs-uat-time-chart" class="chart-canvas chart-canvas--standard"></div>
        </div>
        <p id="management-status" class="panel-status" hidden></p>
      </section>

      <section id="product-cycle-panel" class="panel" aria-label="Product cycle time by team">
        <h2 id="product-cycle-title">Cycle time: leaving parking lot to done</h2>
        <div class="panel-subtitle panel-subtitle--with-help">
          <span id="product-cycle-context">--</span>
          <span class="help-wrap">
            <span class="help-tip" tabindex="0" role="button" aria-label="Product cycle chart explainer">?</span>
            <div class="help-popover" role="tooltip">
              <p><strong>Cycle time per team</strong> is computed from lifecycle timestamps.</p>
              <ul>
                <li>Lead time: Parking + Design + Ready + Development + Feedback.</li>
                <li>Cycle time: Development + Feedback only.</li>
                <li>Sample can be Finished work or Full backlog (includes in-progress aging).</li>
                <li>Values are aggregated by team (Median primary, Average companion).</li>
              </ul>
            </div>
          </span>
        </div>
        <p id="product-cycle-updated" class="panel-subtitle">Last updated: --</p>
        <div class="radio-control-groups" aria-label="Product cycle controls">
          <fieldset class="radio-group-card">
            <legend>Metric</legend>
            <label><input type="radio" name="product-cycle-window-scope" value="lead" /> Lead time</label>
            <label><input type="radio" name="product-cycle-window-scope" value="cycle" checked /> Cycle time</label>
          </fieldset>
          <fieldset class="radio-group-card">
            <legend>Year</legend>
            <label><input type="radio" name="product-cycle-year-scope" value="2025" /> 2025</label>
            <label><input type="radio" name="product-cycle-year-scope" value="2026" checked /> 2026</label>
          </fieldset>
        </div>
        <div class="chart">
          <div id="cycle-time-parking-lot-to-done-chart" class="chart-canvas chart-canvas--dense"></div>
        </div>
        <p id="product-cycle-totals" class="panel-summary" hidden></p>
        <p id="product-cycle-status" class="panel-status" hidden></p>
      </section>

      <section id="done-work-panel" class="panel" aria-label="Done work by team">
        <h2>Done work by team (in ideas)</h2>
        <div class="panel-subtitle panel-subtitle--with-help">
          <span id="done-work-context">--</span>
          <span class="help-wrap">
            <span class="help-tip" tabindex="0" role="button" aria-label="Done work chart explainer">?</span>
            <div class="help-popover" role="tooltip">
              <p><strong>Done work chart</strong> shows completed ideas by team for the selected year.</p>
              <ul>
                <li>Values are counts of ideas marked done.</li>
                <li>Use it to compare delivery volume across teams.</li>
                <li>Interpret together with cycle/quality charts to avoid rewarding volume alone.</li>
              </ul>
            </div>
          </span>
        </div>
        <p id="done-work-updated" class="panel-subtitle">Last updated: --</p>
        <div class="radio-control-groups" aria-label="Done work controls">
          <fieldset class="radio-group-card">
            <legend>Year</legend>
            <label><input type="radio" name="done-work-year-scope" value="2025" /> 2025</label>
            <label><input type="radio" name="done-work-year-scope" value="2026" checked /> 2026</label>
          </fieldset>
        </div>
        <div class="chart">
          <div id="done-work-by-team-chart" class="chart-canvas chart-canvas--dense"></div>
        </div>
        <p id="done-work-status" class="panel-status" hidden></p>
      </section>

      <section id="lifecycle-days-panel" class="panel" aria-label="Lifecycle phase days by team">
        <h2>Lifecycle time spent per phase</h2>
        <div class="panel-subtitle panel-subtitle--with-help">
          <span id="lifecycle-days-context">--</span>
          <span class="help-wrap">
            <span class="help-tip" tabindex="0" role="button" aria-label="Lifecycle chart explainer">?</span>
            <div class="help-popover" role="tooltip">
              <p><strong>Lifecycle by stage</strong> breaks total flow time into stage-level durations by team.</p>
              <ul>
                <li>Stages: Parking, Design, Ready, Development.</li>
                <li>Each bar is stage duration for a team (selected metric).</li>
                <li>Built from lifecycle transitions, then aggregated by team/stage.</li>
                <li>Use with cycle/lead chart to locate where time accumulates.</li>
              </ul>
            </div>
          </span>
        </div>
        <p id="lifecycle-days-updated" class="panel-subtitle">Last updated: --</p>
        <div class="radio-control-groups" aria-label="Lifecycle controls">
          <fieldset class="radio-group-card">
            <legend>Year</legend>
            <label><input type="radio" name="lifecycle-days-year-scope" value="2025" /> 2025</label>
            <label><input type="radio" name="lifecycle-days-year-scope" value="2026" checked /> 2026</label>
          </fieldset>
        </div>
        <div class="chart">
          <div id="lifecycle-time-spent-per-phase-chart" class="chart-canvas chart-canvas--dense"></div>
        </div>
        <p id="lifecycle-days-status" class="panel-status" hidden></p>
      </section>
    </main>

    <script src="./vendor/react.production.min.js"></script>
    <script src="./vendor/react-dom.production.min.js"></script>
    <script src="./vendor/prop-types.min.js"></script>
    <script src="./vendor/recharts.umd.js"></script>
    <script src="./dashboard-charts-recharts.js"></script>
    <script src="./dashboard-view-utils.js"></script>
    <script src="./dashboard-app.js"></script>
  </body>
</html>
