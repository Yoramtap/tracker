<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      http-equiv="Content-Security-Policy"
      content="default-src 'self'; script-src 'self'; style-src 'self' 'unsafe-inline'; style-src-elem 'self' 'unsafe-inline'; style-src-attr 'unsafe-inline'; img-src 'self' data: https:; connect-src 'self'; object-src 'none'; base-uri 'self'; form-action 'none'"
    />
    <title>Backlog Trends</title>
    <link rel="stylesheet" href="./dashboard-styles.css" />
  </head>
  <body>
    <main>
      <section id="trend-panel" class="panel" aria-label="Backlog trend chart">
        <h1>Interactive chart - Bug trend across teams</h1>
        <p id="trend-updated" class="panel-subtitle">Last updated: --</p>
        <div class="chart">
          <div id="bug-trend-chart" class="chart-canvas chart-canvas--standard"></div>
        </div>
        <p id="trend-status" class="panel-status" hidden></p>
      </section>

      <section id="composition-panel" class="panel" aria-label="Backlog stacked bars">
        <h2>Interactive chart - Bug composition by priority</h2>
        <p id="composition-updated" class="panel-subtitle">Last updated: --</p>
        <div class="radio-control-groups" aria-label="Composition controls">
          <fieldset class="radio-group-card">
            <legend>Team</legend>
            <label><input type="radio" name="composition-team-scope" value="bc" checked /> BC</label>
            <label><input type="radio" name="composition-team-scope" value="api" /> API</label>
            <label><input type="radio" name="composition-team-scope" value="legacy" /> Legacy</label>
            <label><input type="radio" name="composition-team-scope" value="react" /> React</label>
            <label><input type="radio" name="composition-team-scope" value="all" /> All</label>
          </fieldset>
        </div>
        <div class="chart">
          <div id="bug-composition-chart" class="chart-canvas chart-canvas--dense bar-chart-wrap"></div>
        </div>
        <p id="composition-status" class="panel-status" hidden></p>
      </section>

      <section id="uat-panel" class="panel" aria-label="UAT aging by priority">
        <h2>Interactive chart - UAT open by priority</h2>
        <p id="uat-context" class="panel-subtitle">Broadcast, -- currently in UAT</p>
        <p id="uat-updated" class="panel-subtitle">Last updated: --</p>
        <div class="chart">
          <div id="uat-open-by-priority-chart" class="chart-canvas chart-canvas--standard"></div>
        </div>
        <p id="uat-status" class="panel-status" hidden></p>
      </section>

      <section id="management-panel" class="panel" aria-label="Broadcast flow by priority">
        <h2>Interactive chart - Development time vs UAT time</h2>
        <p id="management-context" class="panel-subtitle">Broadcast, -- historical flow tickets (sample)</p>
        <p id="management-updated" class="panel-subtitle">Last updated: --</p>
        <div class="radio-control-groups" aria-label="Management controls">
          <fieldset class="radio-group-card">
            <legend>Issue scope</legend>
            <label><input type="radio" name="management-uat-scope" value="all" checked /> All issues</label>
            <label><input type="radio" name="management-uat-scope" value="bugs_only" /> Bugs only</label>
          </fieldset>
        </div>
        <div class="chart">
          <div id="development-time-vs-uat-time-chart" class="chart-canvas chart-canvas--standard"></div>
        </div>
        <p id="management-status" class="panel-status" hidden></p>
      </section>

      <section id="product-cycle-panel" class="panel" aria-label="Product cycle time by team">
        <h2 id="product-cycle-title">Cycle time: leaving parking lot to done</h2>
        <p id="product-cycle-context" class="panel-subtitle">--</p>
        <p id="product-cycle-updated" class="panel-subtitle">Last updated: --</p>
        <div class="radio-control-groups" aria-label="Product cycle controls">
          <fieldset class="radio-group-card">
            <legend>Metric</legend>
            <label><input type="radio" name="product-cycle-window-scope" value="lead" /> Lead time</label>
            <label><input type="radio" name="product-cycle-window-scope" value="cycle" checked /> Cycle time</label>
          </fieldset>
          <fieldset class="radio-group-card">
            <legend>Year</legend>
            <label><input type="radio" name="product-cycle-year-scope" value="2025" /> 2025</label>
            <label><input type="radio" name="product-cycle-year-scope" value="2026" checked /> 2026</label>
          </fieldset>
        </div>
        <div class="chart">
          <div id="cycle-time-parking-lot-to-done-chart" class="chart-canvas chart-canvas--dense"></div>
        </div>
        <p id="product-cycle-totals" class="panel-summary" hidden></p>
        <p id="product-cycle-status" class="panel-status" hidden></p>
      </section>

      <section id="done-work-panel" class="panel" aria-label="Done work by team">
        <h2>Done work by team (in ideas)</h2>
        <p id="done-work-context" class="panel-subtitle">--</p>
        <p id="done-work-updated" class="panel-subtitle">Last updated: --</p>
        <div class="radio-control-groups" aria-label="Done work controls">
          <fieldset class="radio-group-card">
            <legend>Year</legend>
            <label><input type="radio" name="done-work-year-scope" value="2025" /> 2025</label>
            <label><input type="radio" name="done-work-year-scope" value="2026" checked /> 2026</label>
          </fieldset>
        </div>
        <div class="chart">
          <div id="done-work-by-team-chart" class="chart-canvas chart-canvas--dense"></div>
        </div>
        <p id="done-work-status" class="panel-status" hidden></p>
      </section>

      <section id="lifecycle-days-panel" class="panel" aria-label="Lifecycle phase days by team">
        <h2>Lifecycle time spent per phase</h2>
        <p class="panel-subtitle panel-subtitle--with-help">
          <span id="lifecycle-days-context">--</span>
          <span class="help-wrap">
            <span class="help-tip" tabindex="0" role="button" aria-label="Lifecycle chart explainer">?</span>
            <div class="help-popover" role="tooltip">
              <p><strong>Lifecycle chart</strong> shows time spent per stage (not just lead/cycle totals), by team.</p>
              <p><strong>Stages</strong></p>
              <ul>
                <li>Parking, Design, Ready, Development.</li>
              </ul>
              <p><strong>What each bar means</strong></p>
              <ul>
                <li>For the selected stage/team, the bar is the chosen summary statistic (Median or Average) of days spent in that stage.</li>
              </ul>
              <p><strong>Filters</strong></p>
              <ul>
                <li>Year: 2025 or 2026.</li>
                <li>Measured in: Median or Average.</li>
              </ul>
              <p><strong>How it is computed</strong></p>
              <ul>
                <li>For each idea, we reconstruct stage durations from lifecycle timestamps/events.</li>
                <li>We aggregate per team, per stage.</li>
                <li>Finished work uses completed timelines; full backlog includes ongoing ideas using current-time tail where needed.</li>
                <li>All time combines 2025+2026 aggregates (weighted by sample size).</li>
              </ul>
            </div>
          </span>
        </p>
        <p id="lifecycle-days-updated" class="panel-subtitle">Last updated: --</p>
        <div class="radio-control-groups" aria-label="Lifecycle controls">
          <fieldset class="radio-group-card">
            <legend>Year</legend>
            <label><input type="radio" name="lifecycle-days-year-scope" value="2025" /> 2025</label>
            <label><input type="radio" name="lifecycle-days-year-scope" value="2026" checked /> 2026</label>
          </fieldset>
        </div>
        <div class="chart">
          <div id="lifecycle-time-spent-per-phase-chart" class="chart-canvas chart-canvas--dense"></div>
        </div>
        <p id="lifecycle-days-status" class="panel-status" hidden></p>
      </section>
    </main>

    <script src="./vendor/react.production.min.js"></script>
    <script src="./vendor/react-dom.production.min.js"></script>
    <script src="./vendor/prop-types.min.js"></script>
    <script src="./vendor/recharts.umd.js"></script>
    <script src="./dashboard-charts-recharts.js"></script>
    <script src="./dashboard-view-utils.js"></script>
    <script src="./dashboard-app.js"></script>
  </body>
</html>
